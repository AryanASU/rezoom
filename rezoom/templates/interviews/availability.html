{% extends "base.html" %}
{% block title %}My Availability Â· Rezoom{% endblock %}
{% block content %}
<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h5">My Availability</h1>
    <a class="btn btn-light" href="{% url 'emp_dashboard' %}">Back</a>
  </div>

  <div class="glass p-4 mb-4">
    <form method="post" action="{% url 'availability_add' %}" class="row g-3 align-items-end">
      {% csrf_token %}
      <div class="col-12 col-md-4">
        <label class="form-label">Start</label>
        {{ form.start }}
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">End</label>
        {{ form.end }}
      </div>
      <div class="col-12 col-md-2 form-check mt-4">
        {{ form.is_bookable }} <label class="form-check-label">Bookable</label>
      </div>
      <div class="col-12 col-md-2">
        <button class="btn btn-brand w-100" type="submit">Add</button>
      </div>
    </form>
  </div>

  <div class="glass p-4">
    <h2 class="h6 mb-3">Upcoming slots</h2>
    {% if slots %}
      <div class="table-responsive">
        <table class="table align-middle">
          <thead><tr><th>Start</th><th>End</th><th>Bookable</th><th></th></tr></thead>
          <tbody>
            {% for s in slots %}
            <tr>
              <td>{{ s.start|date:"M j, Y g:i a" }}</td>
              <td>{{ s.end|date:"M j, Y g:i a" }}</td>
              <td>{% if s.is_bookable %}Yes{% else %}No{% endif %}</td>
              <td class="text-end">
                <a class="btn btn-sm btn-light" href="{% url 'availability_delete' s.id %}">Delete</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">No slots yet. Add some above.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
